
spring:
  cloud:
    consul:
      host: 192.168.99.103
      port: 8500
    config:
      name: gateway
      profile: dev
      fail-fast: true
      discovery:
        enabled: true
        service-id: config
    gateway:
      discovery:
        locator:
          enabled: false
          lower-case-service-id: true
#          predicates[0]:
#            name: Path
#            args[pattern]: "'/'+serviceId+'/**'"
#          filters[0]:
#            name: RewritePath
#            args[regexp]: "'/' + serviceId + '/(?<remaining>.*)'"
#            args[replacement]: "'/${remaining}'"
#          predicates[1]:
#            name: Path
#            args[pattern]: "'/'+serviceId+'/**'"
#          filters[1]:
#            name: AddRequestParameter
#            args:
#              name: "'foo'"
#              value: serviceId
      routes:
      - id: repeat_product_route
        uri: lb://product
        predicates:
        - Path=/repeat-product/**
        - Method=GET
        filters:
        - StripPrefix=1
      - id: product_route
        uri: lb://product
        predicates:
        - Path= /product/**
        filters:
        - StripPrefix=1
        - Product=true
trace: true